<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Recommendations</title>
<style>
  body{font-family:Arial;background:#f0f4f8;margin:0;padding:20px}
  .container{max-width:1100px;margin:auto}
  h1{text-align:center}
  .books-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-top:20px}
  .book-card{background:#fff;padding:12px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.08);text-align:center}
  .book-title{font-weight:700}
  .book-author{color:#555;margin-top:6px}
  .read-btn{display:inline-block;margin-top:8px;padding:7px 10px;background:#0288d1;color:#fff;border-radius:6px;text-decoration:none}
  .error{color:red;text-align:center}
</style>
</head>
<body>
<div class="container">
  <h1>Your Recommendations</h1>
  {% if error %}
    <p class="error">{{ error }}</p>
  {% endif %}

  {% if rec_books %}
    <div class="books-grid">
      {% for book in rec_books %}
        <div class="book-card">
          <div class="book-title">{{ book.Title or book.title or 'Unknown Title' }}</div>
          <div class="book-author">{{ book.Author or book.author or 'Unknown Author' }}</div>
          <div class="book-desc">{{ (book.Description[:120] + '...') if book.Description else '' }}</div>

          {% if book.Link %}
            {% set link = book.Link %}
            {% if link[:7] == 'static/' %}
              <a class="read-btn" href="{{ url_for('static', filename=link[7:]) }}" target="_blank" rel="noopener">Read</a>
            {% else %}
              <a class="read-btn" href="{{ link }}" target="_blank" rel="noopener">Read</a>
            {% endif %}
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p style="text-align:center;color:#666">No recommendations yet. Select books on the home page and submit to get suggestions.</p>
  {% endif %}
</div>
</body>
</html>
